/**
 * videojs-theater-toggle
 * @version 0.0.4
 * @copyright 2017 Will Xavier <willyelnsg.x@gmail.com>
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsTheaterToggle=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;!function(){function e(e){this.value=e}function t(t){function o(r,a){try{var l=t[r](a),i=l.value;i instanceof e?Promise.resolve(i.value).then(function(e){o("next",e)},function(e){o("throw",e)}):n(l.done?"return":"normal",l.value)}catch(e){n("throw",e)}}function n(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?o(r.key,r.arg):a=null}var r,a;this._invoke=function(e,t){return new Promise(function(n,l){var i={key:e,arg:t,resolve:n,reject:l,next:null};a?a=a.next=i:(r=a=i,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},n="vjs-theater-container-button",r={saveTheaterState:!0,localItemName:"theaterVideoState"},a=function(a){function l(i,s){t(this,l);var c=o(this,a.call(this,i,s));void 0===s?s=r:(s.saveTheaterState=void 0===s.saveTheaterState?r.saveTheaterState:s.saveTheaterState,s.localItemName=void 0===s.localItemName?r.localItemName:s.localItemName),c.on(i,"timeupdate",c.isTheater);var u=document.createElement("button");if(u.className=n,s.saveTheaterState)if("undefined"!=typeof Storage){if(null!==localStorage.getItem(s.localItemName)){"enabled"===localStorage.getItem(s.localItemName)&&u.classList.add("theater-toggled")}}else e.log("Sorry! No Web Storage support...");else{null!==localStorage.getItem(s.localItemName)&&localStorage.removeItem(s.localItemName)}i.on("ready",function(){i.trigger("theaterMode",c.theaterMode)}),i.on("fullscreenchange",function(e){var t=document.getElementsByClassName(n)[0];i.isFullscreen()?t.classList.add("vjs-hidden"):t.classList.remove("vjs-hidden")});var d=document.createElement("span");return d.textContent="Theater",u.appendChild(d),i.controlBar.el().insertBefore(u,i.controlBar.fullscreenToggle.el()),i.controlBar.addChild(u),i.addClass("vjs-theater-toggle"),document.getElementsByClassName(n)[0].onclick=function(){this.classList.contains("theater-toggled")?(this.classList.remove("theater-toggled"),localStorage.setItem(s.localItemName,"disabled")):(this.classList.add("theater-toggled"),localStorage.setItem(s.localItemName,"enabled")),i.trigger("theaterMode",this.theaterMode)},c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a),l.prototype.theaterMode=function(){return this.isTheater()},l.prototype.isTheater=function(){return document.getElementsByClassName(n)[0].classList.contains("theater-toggled")},l}(e.getPlugin("plugin"));return e.registerPlugin("theaterToggle",a),a});